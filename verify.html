<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Certificate Verification</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #f1f1f6;
      }
      .frame {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
        background: #f1f1f6;
      }
    </style>
  </head>
  <body>
    <iframe id="certFrame" class="frame" title="Certificate"></iframe>
    <script>
      (function () {
        const params = new URLSearchParams(window.location.search);
        const hash = window.location.hash ? window.location.hash.slice(1) : "";

        if (hash) {
          const parts = hash.split("~").map((v) => decodeURIComponent(v || ""));
          if (parts.length >= 1) params.set("certNo", parts[0] || "");
          if (parts.length >= 2) params.set("appNo", parts[1] || "");
          if (parts.length >= 3) params.set("date", parts[2] || "");
          if (parts.length >= 4) params.set("name", parts[3] || "");
          if (parts.length >= 5) params.set("father", parts[4] || "");
          if (parts.length >= 6) params.set("village", parts[5] || "");
          if (parts.length >= 7) params.set("mouza", parts[6] || "");
          if (parts.length >= 8) params.set("circle", parts[7] || "");
          if (parts.length >= 9) params.set("district", parts[8] || "");
          if (parts.length >= 10) params.set("caste", parts[9] || "");
          if (parts.length >= 11) params.set("photoUrl", parts[10] || "");
        }

        if (params.has("n")) params.set("name", params.get("n"));
        if (params.has("f")) params.set("father", params.get("f"));
        if (params.has("v")) params.set("village", params.get("v"));
        if (params.has("m")) params.set("mouza", params.get("m"));
        if (params.has("c")) params.set("circle", params.get("c"));
        if (params.has("d")) params.set("district", params.get("d"));
        if (params.has("ca")) params.set("caste", params.get("ca"));
        if (params.has("cn")) params.set("certNo", params.get("cn"));
        if (params.has("an")) params.set("appNo", params.get("an"));
        if (params.has("dt")) params.set("date", params.get("dt"));
        if (params.has("pu")) params.set("photoUrl", params.get("pu"));

        if (!params.has("read")) params.set("read", "1");

        const src = "index.html?" + params.toString();
        document.getElementById("certFrame").src = src;
      })();
    </script>
  </body>
</html>
